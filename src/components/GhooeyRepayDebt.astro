<h1>Repay debt</h1>
<h2>Repay using wallet balance (DAI)</h2>
<template x-if="!$store.currentUser.account">
  <p>Connect your wallet start to repay your debt</p>
</template>
<template x-if="$store.currentUser.account && $store.currentUser.aavePortfolio.summary">
  <section
    x-data="aaveRepayDebt"
    x-init=`
    token = $aaveAssetBySymbol('DAI');
    amount = 0;
    userAssetData = $store.currentUser?.aavePortfolio?.summary.userReservesData.filter(reserve =>  token.UNDERLYING.toLowerCase() === reserve.underlyingAsset.toLowerCase())[0];
    interestRateMode = userAssetData?.reserve?.borrowRateMode;
    `
  >
    <form @submit.prevent="repayDebt()">
      <div>
        <label for="repayWithAmount">Repay this amount using my balance:</label>
        <input
          x-model.number="amount"
          min="0.000001"
          id="repayWithAmount"
          type="number"
          placeholder="1.00"
          step="0.000001"
        />
      </div>
      <button>Repay</button>
    </form>
    <span x-text="status"></span>
  </section>
</template>
<br />
<br />
<h2>Repay using wallet balance (GHO)</h2>
<template x-if="!$store.currentUser.account">
  <p>Connect your wallet start to repay your debt</p>
</template>
<template x-if="$store.currentUser.account && $store.currentUser.aavePortfolio.summary">
  <section
    x-data="aaveRepayDebt"
    x-init=`
    token = $aaveAssetBySymbol('GHO');
    amount = 0;
    userAssetData = $store.currentUser?.aavePortfolio?.summary.userReservesData.filter(reserve =>  token.UNDERLYING.toLowerCase() === reserve.underlyingAsset.toLowerCase())[0];
    interestRateMode = userAssetData?.reserve?.borrowRateMode;
    `
  >
    <form @submit.prevent="repayDebt()">
      <div>
        <label for="repayWithAmount">Repay this amount using my balance:</label>
        <input
          x-model.number="amount"
          min="0.000001"
          id="repayWithAmount"
          type="number"
          placeholder="1.00"
          step="0.000001"
        />
      </div>
      <button>Repay</button>
    </form>
    <span x-text="status"></span>
  </section>
</template>
<br />
<br />
<h2>Repay using supply balance</h2>
<template x-if="$store.currentUser.account">
  <section x-data="aaveRepayDebt" x-init="token = $aaveAssetBySymbol('DAI'); amount = 0;"></section>
</template>
